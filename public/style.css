:root {
  --bg: #0b0f14;
  --card: #121922;
  --muted: #8aa0b3;
  --text: #dde7f1;
  --primary: #3aa2ff;
  --accent: #7bf1a8;
  --ring: rgba(58,162,255,.35);
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 800px at 20% -10%, #18212b, #0b0f14);
  color: var(--text);
}
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: .75rem 1rem; border-bottom: 1px solid #1e2a37; backdrop-filter: blur(8px);
  position: sticky; top: 0; background: rgba(11,15,20,.7);
}
.brand { font-weight: 700; letter-spacing: .3px; }
.session { display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; }
label { font-size: .8rem; display: grid; gap: .25rem; color: var(--muted); }
input, select, button {
  padding: .55rem .7rem; border-radius: .6rem; border: 1px solid #263445; background: #0f1620; color: var(--text);
}
input:focus, select:focus {
  outline: none; border-color: var(--primary); box-shadow: 0 0 0 .2rem var(--ring);
}
button { cursor: pointer; border: 1px solid #2b3b4f; background: #16202b; }
button.primary { background: #1b2938; border-color: #34516e; }
button.accent { background: #183225; border-color: #2f6e4f; }
button:hover { filter: brightness(1.08); }

.wrap { max-width: 1100px; margin: 1rem auto; padding: 0 .75rem; display: grid; gap: 1rem; }
.card { background: var(--card); border: 1px solid #1e2a37; border-radius: .9rem; padding: 1rem; }
.grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: .75rem; }
.actions { display: flex; align-items: end; }
.hint { color: var(--muted); margin-top: .5rem; }

.feedList { display: grid; gap: .6rem; max-height: 60vh; overflow: auto; padding-right: .4rem; }
.item { padding: .7rem .8rem; border: 1px solid #2a3b50; border-radius: .7rem; background: #0f1620; }
.item .meta { display: flex; justify-content: space-between; color: var(--muted); font-size: .85rem; }
.item .res { margin-top: .35rem; display: flex; align-items: center; gap: .6rem; flex-wrap: wrap; }
.badge { padding: .2rem .45rem; border-radius: .5rem; border: 1px solid #2a3b50; }
.die { border: 1px dashed #30465d; border-radius: .4rem; padding: .2rem .4rem; font-variant-numeric: tabular-nums; }
.total { padding: .2rem .45rem; border-radius: .5rem; background: #163023; border: 1px solid #2f6e4f; }
.sys { color: var(--muted); font-style: italic; }

@media (max-width: 800px) { .grid { grid-template-columns: 1fr 1fr; } }

/* --- Dice animation + highlights --- */
@keyframes dice-wiggle {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-4px) rotate(6deg); }
  100% { transform: translateY(0) rotate(0deg); }
}
.die.rolling { animation: dice-wiggle 0.6s ease-in-out infinite; opacity: .95; }
.die.nat20 { background: #173b26; border-color: #2f6e4f; font-weight: 700; }
.die.nat1  { background: #3b1a1a; border-color: #8a3c3c; font-weight: 700; }

/* 3D scéna */
#dice3d {
  width: 100%;
  aspect-ratio: 16 / 9;
  min-height: 420px;
  background: #0b0f14;           /* jednolité, nic neprosvítá */
  border: 1px solid #1e2a37;
  border-radius: .9rem;
  overflow: hidden;
}
#dice3d canvas { width: 100%; height: 100%; display: block; }
/* --- 2 sloupce na desktopu, sticky výsledky vpravo --- */
.wrap.twoCols {
  display: grid;
  grid-template-columns: minmax(520px, 2fr) minmax(340px, 1fr);
  gap: 1rem;
  align-items: start;
}
.sideCol .sticky {
  position: sticky;
  top: 80px; /* kolize s horním headerem */
  max-height: calc(100vh - 100px);
  overflow: auto;
}

/* feed uvnitř sticky sloupce vyplní výšku */
.sideCol .feedList { max-height: none; }

/* responzivně zpět na 1 sloupec */
@media (max-width: 980px) {
  .wrap.twoCols { grid-template-columns: 1fr; }
  .sideCol .sticky { position: static; max-height: none; }
}
