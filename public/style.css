:root {
  --bg: #0b0f14;
  --card: #121922;
  --muted: #8aa0b3;
  --text: #dde7f1;
  --primary: #3aa2ff;
  --accent: #7bf1a8;
  --ring: rgba(58,162,255,.35);
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 800px at 20% -10%, #18212b, #0b0f14);
  color: var(--text);
}
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: .75rem 1rem; border-bottom: 1px solid #1e2a37; backdrop-filter: blur(8px);
  position: sticky; top: 0; background: rgba(11,15,20,.7);
}
.brand { font-weight: 700; letter-spacing: .3px; }
.session { display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; }
label { font-size: .8rem; display: grid; gap: .25rem; color: var(--muted); }
input, select, button {
  padding: .55rem .7rem; border-radius: .6rem; border: 1px solid #263445; background: #0f1620; color: var(--text);
}
input:focus, select:focus {
  outline: none; border-color: var(--primary); box-shadow: 0 0 0 .2rem var(--ring);
}
button { cursor: pointer; border: 1px solid #2b3b4f; background: #16202b; }
button.primary { background: #1b2938; border-color: #34516e; }
button.accent { background: #183225; border-color: #2f6e4f; }
button:hover { filter: brightness(1.08); }

.wrap { max-width: 1100px; margin: 1rem auto; padding: 0 .75rem; display: grid; gap: 1rem; }
.card { background: var(--card); border: 1px solid #1e2a37; border-radius: .9rem; padding: 1rem; }
.grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: .75rem; }
.actions { display: flex; align-items: end; }
.hint { color: var(--muted); margin-top: .5rem; }

.feedList { display: grid; gap: .6rem; max-height: 60vh; overflow: auto; padding-right: .4rem; }
.item { padding: .7rem .8rem; border: 1px solid #2a3b50; border-radius: .7rem; background: #0f1620; }
.item .meta { display: flex; justify-content: space-between; color: var(--muted); font-size: .85rem; }
.item .res { margin-top: .35rem; display: flex; align-items: center; gap: .6rem; flex-wrap: wrap; }
.badge { padding: .2rem .45rem; border-radius: .5rem; border: 1px solid #2a3b50; }
.die { border: 1px dashed #30465d; border-radius: .4rem; padding: .2rem .4rem; font-variant-numeric: tabular-nums; }
.total { padding: .2rem .45rem; border-radius: .5rem; background: #163023; border: 1px solid #2f6e4f; }
.sys { color: var(--muted); font-style: italic; }

@media (max-width: 800px) { .grid { grid-template-columns: 1fr 1fr; } }

/* --- Dice animation + highlights --- */
@keyframes dice-wiggle {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-4px) rotate(6deg); }
  100% { transform: translateY(0) rotate(0deg); }
}
.die.rolling { animation: dice-wiggle 0.6s ease-in-out infinite; opacity: .95; }
.die.nat20 { background: #173b26; border-color: #2f6e4f; font-weight: 700; }
.die.nat1  { background: #3b1a1a; border-color: #8a3c3c; font-weight: 700; }

/* 3D scéna */
#dice3d {
  width: 100%;
  aspect-ratio: 16 / 9;       /* nastaví výšku podle šířky */
  background: radial-gradient(800px 400px at 30% -10%, #0e141b, #0b0f14);
  border: 1px solid #1e2a37;
  border-radius: .9rem;
  overflow: hidden;
}
#dice3d canvas {
  width: 100%;
  height: 100%;
  display: block;
}
/* === Dvousloupec pro desktop, sticky výsledky vpravo === */
.wrap.twoCols{
  max-width: 1200px;
  margin: 1rem auto;
  padding: 0 .75rem;
  display: grid;
  grid-template-columns: minmax(0, 1.6fr) minmax(320px, .9fr);
  gap: 1rem;
  align-items: start;
}
.span-2{ grid-column: 1 / -1; }

/* Výsledky vpravo – sticky */
.feed.sticky{
  position: sticky;
  top: 72px;                  /* pod horní lištou */
  max-height: calc(100vh - 110px);
  overflow: auto;
}
/* feed uvnitř sticky sloupce může růst */
.feed.sticky .feedList{ max-height: none; }

/* Formulář v „Hod kostkou“: 3 pole + sloupec akcí */
.roller .grid.form{
  display: grid;
  grid-template-columns: repeat(3, minmax(140px, 1fr)) minmax(170px, .8fr);
  gap: .75rem;
  align-items: end;
}

/* Srovnání tlačítek v pravém sloupci formuláře */
.actions.vstack{ 
  display: flex; 
  flex-direction: column; 
  gap: .5rem; 
  align-items: stretch; 
}
.actions .row{ display: flex; gap: .5rem; }
.actions button{ width: 100%; }

/* Responsivně zpět na 1 sloupec */
@media (max-width: 980px){
  .wrap.twoCols{ grid-template-columns: 1fr; }
  .feed.sticky{ position: static; max-height: none; }
}

/* (volitelné) vzhled tlačítek – můžeš ponechat tvoje stávající */
#advBtn, #disBtn, #muteBtn, #exportBtn, #clearBtn{
  background: #16202b; border: 1px solid #2b3b4f; padding: .55rem .7rem; border-radius: .6rem;
}
#advBtn{ border-color: #3f6e3a; }
#disBtn{ border-color: #6e3a3a; }
#muteBtn.active{ background: #1f2f20; border-color: #2f6e4f; }
