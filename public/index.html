<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DnD Kostky ‚Äì realtime</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Top bar -->
  <header class="topbar">
    <div class="brand">üé≤ DnD Kostky</div>
    <div class="session">
      <label>Jm√©no
        <input id="playerInput" type="text" maxlength="32" placeholder="Hr√°ƒç">
      </label>
      <label>St≈Øl
        <input id="roomInput" type="text" maxlength="32" placeholder="stul-1">
      </label>
      <button id="joinBtn" class="primary">P≈ôipojit</button>
      <button id="shareBtn" title="Zkop√≠ruje odkaz na aktu√°ln√≠ st≈Øl">Sd√≠let odkaz</button>
    </div>
  </header>

  <main class="wrap twoCols">
    <!-- Hod kostkou (p≈ôes oba sloupce) -->
    <section class="roller card span-2">
      <h2>Hod kostkou</h2>

      <div class="grid form">
        <label>Kostka
          <select id="sidesSelect">
            <option value="4">d4</option>
            <option value="6">d6</option>
            <option value="8">d8</option>
            <option value="10">d10</option>
            <option value="12">d12</option>
            <option value="20" selected>d20</option>
            <option value="100">d100</option>
          </select>
        </label>

        <label>Poƒçet
          <input id="countInput" type="number" min="1" max="10" value="1">
        </label>

        <label>Modifik√°tor
          <input id="modInput" type="number" min="-99" max="99" value="0">
        </label>

        <!-- sloupec s hlavn√≠ akc√≠ -->
        <div class="actions vstack">
          <button id="rollBtn" class="accent">Hodit!</button>
          <div class="row">
            <button id="advBtn" type="button" title="Advantage hod (dvƒõ d20, vezme se vy≈°≈°√≠)">Adv (d20)</button>
            <button id="disBtn" type="button" title="Disadvantage hod (dvƒõ d20, vezme se ni≈æ≈°√≠)">Dis (d20)</button>
          </div>
        </div>
      </div>

      <!-- Action bar pod formul√°≈ôem -->
      <div class="actionBar">
        <button id="muteBtn" type="button" title="Zapnout/vypnout zvuk">üîä Zvuk</button>
        <div class="spacer"></div>
        <button id="clearBtn"  type="button" title="Smazat v√Ωsledky a 3D kostky">Vyƒçistit</button>
        <button id="exportBtn" type="button" title="Export historie do CSV">Export CSV</button>
      </div>

      <p class="hint">Tip: sd√≠lej odkaz na st≈Øl, a≈• h√°z√≠te spoleƒçnƒõ.</p>
    </section>

    <!-- 3D sc√©na (lev√Ω sloupec) -->
    <section class="scene card">
      <h2>3D kostky</h2>
      <div id="dice3d"></div>
    </section>

    <!-- V√Ωsledky (prav√Ω sloupec, sticky) -->
    <aside class="feed card sticky">
      <h2>V√Ωsledky</h2>
      <div id="feed" class="feedList" aria-live="polite"></div>
    </aside>
  </main>

  <footer class="foot"></footer>

  <!-- Three.js + Tween + n√°≈° 3D skript MUS√ç b√Ωt p≈ôed client.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tweenjs/tween.js@18.6.4/dist/tween.umd.js"></script>
  <script src="dice3d.js"></script>

  <!-- Socket.IO klient + aplikace -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>

  <!-- Upozornƒõn√≠, kdyby Socket.IO chybƒõl -->
  <script>
    if (!window.io) {
      document.body.insertAdjacentHTML(
        'beforeend',
        '<div style="position:fixed;left:0;right:0;bottom:0;padding:10px;background:#5b1f1f;color:#fff;text-align:center;z-index:9999">‚ö†Ô∏è Realtime knihovna se nenaƒçetla. Nasazuj jako <b>Web Service</b> se startem <code>npm start</code>, ne jako Static Site.</div>'
      );
    }
  </script>
  <noscript>
    <div style="padding:10px;background:#5b1f1f;color:#fff;text-align:center">
      Pro tuto str√°nku mus√≠ b√Ωt povolen JavaScript.
    </div>
  </noscript>
</body>
</html>
